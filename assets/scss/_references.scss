/* ==========================================================================
   References (Pandoc + CSL) and Footnotes
   ========================================================================== */

/* Reference list */
#refs.csl-bib-body,
.references.csl-bib-body {
    margin-top: 0;
    /* remove default top gap */
    font-size: 0.85rem;
    line-height: 1.35;
}

#refs .csl-entry,
.references .csl-entry {
    margin: 0 0 0.3rem 0;
    line-height: 1.35;
    padding-left: 1.75em;
    /* increased for extra space before [1] */
    text-indent: -1.25em;
    /* keep hanging indent consistent */
    overflow-wrap: anywhere;
    white-space: normal;
}

#refs .csl-left-margin,
.references .csl-left-margin,
#refs .csl-right-inline,
.references .csl-right-inline {
    display: inline;
    vertical-align: baseline;
}

#refs .csl-left-margin::after,
.references .csl-left-margin::after {
    content: " ";
}

/* Tighten spacing between References header and citations */
h4+#refs,
h4+.references {
    margin-top: 0;
    /* remove extra gap above the refs block */
}

h4#references,
h4:has(+ #refs),
h4:has(+ .references) {
    margin-bottom: 0.25rem;
    /* shrink the space below the heading */
}

/* Footnotes */
.footnotes {
    margin-top: 1rem;
    font-size: 0.85rem;
    color: inherit;
    line-height: 1.35;
}

/* Add a heading above footnotes â€” styled like h4 */
.footnotes::before {
    content: "Footnotes";
    display: block;
    font-size: 1rem;
    /* match h4 size */
    font-weight: 600;
    /* match h4 weight */
    line-height: 1.3;
    color: rgb(34, 34, 34);
    /* match h4 color */
    margin-top: 1rem;
    margin-bottom: 1.33rem;
    /* match h4 spacing */
}

.footnotes hr {
    display: none;
}

.footnotes ol {
    list-style: none !important;
    margin: 0;
    /* remove browser default list margin */
    padding: 0;
    counter-reset: none !important;
    margin-top: 0;
    /* remove extra gap */
}

.footnotes li {
    margin: 0 0 0.3rem 0;
    line-height: 1.35;
    overflow-wrap: anywhere;
    white-space: normal;
    list-style-type: none !important;
}

.footnotes li::marker,
.footnotes li::before {
    content: none !important;
}

.footnotes li p {
    display: inline;
    margin: 0;
}

.footnotes .footnote-num {
    display: inline-block;
    min-width: 2em;
    /* keeps numbers aligned */
    margin-right: 1px;
    /* minimal visible space */
    font-weight: 400;
    color: inherit;
    text-decoration: none;
}

.footnotes .footnote-num:hover {
    text-decoration: underline;
}

/* --- Order enforcement inside post-body --- */
.post-body {
    display: flex;
    flex-direction: column;
}

.post-body .footnotes {
    order: 2;
    /* Footnotes first */
}

.post-body #references,
.post-body #refs {
    order: 3;
    /* References after footnotes */
}

/* Force date colors */
main.writing article.post time.post-date {
    color: #555 !important;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
}

main.portfolio article.post time.post-date {
    color: #444 !important;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
}