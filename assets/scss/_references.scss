/* ==========================================================================
   References (Pandoc + CSL) and Footnotes
   ========================================================================== */

/* === References list (Pandoc/CSL output) ================================ */

#refs.csl-bib-body,
.references.csl-bib-body {
    margin-top: 0;
    /* remove default top gap */
    font-size: 0.85rem;
    line-height: 1.35;
}

#refs .csl-entry,
.references .csl-entry {
    margin: 0 0 0.3rem 0;
    line-height: 1.35;
    padding-left: 1.75em;
    /* room for [1] label */
    text-indent: -1.25em;
    /* hanging indent */
    overflow-wrap: anywhere;
    white-space: normal;
}

#refs .csl-left-margin,
.references .csl-left-margin,
#refs .csl-right-inline,
.references .csl-right-inline {
    display: inline;
    vertical-align: baseline;
}

#refs .csl-left-margin::after,
.references .csl-left-margin::after {
    content: " ";
}

/* Tighten spacing around "References" heading (if you use h4) */
h4+#refs,
h4+.references {
    margin-top: 0;
    /* remove extra gap above the refs block */
}

h4#references,
h4:has(+ #refs),
h4:has(+ .references) {
    margin-bottom: 0.25rem;
    /* shrink space below heading */
}

/* === Footnotes (Goldmark) ============================================== */

.footnotes {
    margin-top: 1rem;
    font-size: 0.85rem;
    color: inherit;
    /* match body text color */
    line-height: 1.35;
}

/* Optional small heading for footnotes */
.footnotes::before {
    content: "Footnotes";
    display: block;
    font-size: 1rem;
    /* similar to h4 */
    font-weight: 600;
    line-height: 1.3;
    color: inherit;
    margin-top: 1rem;
    margin-bottom: 1.33rem;
}

.footnotes hr {
    display: none;
    /* hide the default rule */
}

.footnotes ol {
    margin: 0;
    padding-left: 1.25rem;
    /* room for decimal numbers */
    list-style-type: decimal;
    /* ensure numbers show */
}

.footnotes li {
    margin: 0 0 0.5rem 0;
    line-height: 1.35;
    overflow-wrap: anywhere;
    white-space: normal;
}

.footnotes li p {
    display: inline;
    /* avoid extra paragraph breaks */
    margin: 0;
}

/* Back-reference link (usually â†©) */
.footnotes a.footnote-backref {
    margin-left: 0.25rem;
    text-decoration: none;
    opacity: 0.85;
}

.footnotes a.footnote-backref:hover {
    text-decoration: underline;
    opacity: 1;
}

/* === Inline footnote references (superscripts) ========================== */
/* Goldmark typically emits: <sup id="fnref:1"><a class="footnote-ref" ...>1</a></sup> */

sup[id^="fnref"] {
    line-height: 0;
    /* keep superscripts tight */
}

a.footnote-ref {
    text-decoration: none;
}

a.footnote-ref:hover {
    text-decoration: underline;
}

/* === Misc. ============================================================= */

/* Avoid layout surprises: keep normal document flow.
   If you previously used flex on .post-body to reorder blocks,
   it can disrupt paragraphs, figures, etc., so we omit it here. */

/* Date styling (color handled in inline styles via CSS variables) */
main.writing article.post time.post-date,
main.portfolio article.post time.post-date {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
}