{{/* layouts/portfolio/list.html */}}
{{ define "main" }}
<main>
    {{ .Content }}

    <ul class="portfolio-list">
        {{ range .Pages.ByWeight }}
        <li class="portfolio-item">
            <!-- Title -->
            <a href="{{ .RelPermalink }}" class="portfolio-title">{{ .Title }}</a>

            {{/* Summary + Highlights logic */}}
            {{ $hasSummary := or .Params.summary .Summary }}
            {{ $hasHighlights := and .Params.highlights (gt (len .Params.highlights) 0) }}

            {{ if $hasSummary }}
            {{ if .Params.summary }}
            <p class="portfolio-summary">{{ .Params.summary }}</p>
            {{ else if .Summary }}
            <p class="portfolio-summary">{{ .Summary }}</p>
            {{ end }}
            {{ end }}

            {{ if $hasHighlights }}
            <ul class="portfolio-highlights">
                {{ range first 3 .Params.highlights }}
                <li>{{ . | markdownify }}</li>
                {{ end }}
            </ul>
            {{ end }}

            <!-- Tags -->
            {{ with .GetTerms "portfolio_tags" }}
            <div class="tags-block">
                {{ range . }}
                <a class="tag" href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
                {{ end }}
            </div>
            {{ end }}
        </li>
        {{ end }}
    </ul>
</main>
{{ end }}